<?xml version="1.0" encoding="UTF-8"?>
<!-- Calculator  |  PRS-505 version  |  by Mark Nord
	 History: 
	   2010-06-05 Mark Nord - initial release - public beta -->
<document xmlns="http://www.kinoma.com/fskin/1" >
<assets>
<texture href="skins/CalcMainSkin.png">
	<cutout id="calcHeader-l" x="350" y="0" width="70" height="70"/>
	<cutout id="calcHeader-c" x="421" y="0" width="70" height="70"/>
	<cutout id="calcHeader-r" x="492" y="0" width="70" height="70"/>
	<cutout id="calcInfo-l" x="0" y="70" width="1" height="697"/>
	<cutout id="calcInfo-c" x="0" y="70" width="598" height="697"/>
	<cutout id="calcInfo-r" x="0" y="70" width="1" height="697"/>
	<cutout id="calcStatus-l" x="350" y="766" width="70" height="33"/>
	<cutout id="calcStatus-c" x="421" y="766" width="70" height="33"/>
	<cutout id="calcStatus-r" x="492" y="766" width="70" height="33"/>
	<cutout id="gCursor" x="610" y="0" width="90" height="100"/>
	
	<cutout id="button-l" x="610" y="102" width="16" height="40" lines="60"/>
	<cutout id="button-c" x="626" y="102" width="20" height="40" lines="60"/>
	<cutout id="button-r" x="646" y="102" width="16" height="40" lines="60"/>	
		
	<cutout id="radio-l" x="670" y="219" width="25" height="30" columns="60"/>
	<cutout id="radio-c" x="695" y="219" width="15" height="30" columns="60"/>
	<cutout id="radio-r" x="710" y="219" width="20" height="30" columns="60"/>
				
	<cutout id="panel-lt" x="646" y="386" width="9" height="9"/>
	<cutout id="panel-ct" x="655" y="386" width="30" height="9"/>
	<cutout id="panel-rt" x="685" y="386" width="9" height="9"/>
	<cutout id="panel-lm" x="646" y="395" width="9" height="30"/>
	<cutout id="panel-cm" x="655" y="395" width="30" height="30"/>
	<cutout id="panel-rm" x="685" y="395" width="9" height="30"/>
	<cutout id="panel-lb" x="646" y="425" width="9" height="9"/>
	<cutout id="panel-cb" x="655" y="425" width="30" height="9"/>
	<cutout id="panel-rb" x="685" y="425" width="9" height="9"/>
	
</texture>


	<style font="Swis721 BT">
	<style id="digits" size="42" style="bold" color="#000000"/>
	<style id="memory" size="22" style="bold" color="#000000"/>
	<style id="clock" size="22" style="bold" color="#FFFFFF"/>
	</style>
	<style id="button-e" size="21" style="bold" halign="center">
			<style id="button-d" color="#6D6D6D"/>
			<style id="button-p"/>
			<style id="button-s" />
		</style>		
	<style id="control-e" style="normal" size="14" left="25" halign="left">
			<style id="control-d" color="#6D6D6D"/>
			<style id="control-p"/>
			<style id="control-s"/>
		</style>
			
		
	<skin id="memory" 
		styles="memory"/>
	<skin id="digits" 
		styles="digits"/>	
	<skin id="clock" 
		styles="clock"/>
	<skin id="gridCursor" 
		cutouts="gCursor"/>	
	<skin id="radio" 
			cutouts="radio-l,radio-c,radio-r"
			styles="control-d,control-e,control-p,control-s"/>
	<skin id="panel" 
			cutouts="panel-lt,panel-ct,panel-rt,panel-lm,panel-cm,panel-rm,panel-lb,panel-cb,panel-rb"/>
	<skin id="button" 
			cutouts="button-l,button-c,button-r"
			styles="button-d,button-e,button-p,button-s"/>			
	<skin id="calcSkin" 
		cutouts="calcHeader-l,calcHeader-c,calcHeader-r,calcInfo-l,calcInfo-c,calcInfo-r,calcStatus-l,calcStatus-c,calcStatus-r"/>
		
</assets>

	<code>
		 <function id="runJs" params="path,target">
        try {
            var f = new Stream.File(path);          
            var fn = new Function("target", f.toString(), path, 1);
            fn(target);
            delete fn;
        }
        catch(e)
        {
        }
    </function>
    <function id="loadScript">
        if (!this.hasOwnProperty('_scriptLoaded'))
            this._scriptLoaded = false;
        if (!this._scriptLoaded)
        {
            var path = kbook.autoRunRoot.path; 			// restore this before use on PRS-Device
   			//var path = this.getBaseURI().slice(7); 	// patch for use in simulator

            var index = path.lastIndexOf('/');
            if (index > 0)
               path = path.substring(0, index + 1);
            this.driveroot = path.substring(0,2);
            var target = this.AUTORUN_GROUP.AUTORUN;
		    
            this.runJs(path+"calculator.js",target);
        }
        this._scriptLoaded = true;
    </function>
    <function id="modelChanged">
		arguments.callee.grammar.call(this);
        var state = this.getVariable("STATE");
        
        var target;

        if (this.state != state) {
            this.focus(true)
            this.AUTORUN_GROUP.show(false)
            switch(state) {
            case "AUTORUN":
                this.loadScript();
                this.AUTORUN_GROUP.show(true);
                target = this.AUTORUN_GROUP.AUTORUN;
                break;
            }
            this.state = state;
            target.init();
             if (target.isEnabled())
                {
                target.focus(true);
                };
        }         
    </function>

 </code>
 <model>
 		<variable id="BASIS" value="dec"/>
 		<variable id="TRIG" value="deg"/>
 </model>
 
<group id="AUTORUN_GROUP" left="0" right="0" top="0" bottom="0" visible="false">
	<panel skin="calcSkin" left="0" right="0" top="0" bottom="0"/> 
    <kbookLabel skin="title" left="10" right="0" top="0" height="70" align="left" text="Calculator"/>
	<parts>            
		<boolean key="0x30" do="doNext"/>
		<boolean key="0x31" do="doPrevious"/>
		<boolean key="0x27-hold" do="doNext"/>
		<boolean key="0x30-hold" do="doFirst"/>
		<boolean key="0x31-hold" do="doLast"/>
	</parts>
    <group id="AUTORUN" width="600" top="70" bottom="30">
		 <code>
            <function id="doDigit" params="part">                           
	           this.digitF(part.key)		 
            </function>
            
            <function id="doMenu">
              this.exitApp();
            </function>

            <function id="doCenter">
             this.doCenterF();
            </function>

            <function id="doMark">
            this.doCenterF();
            </function>

            <function id="doLeft">
         	   this.moveCursor("left");
            </function>

	       <function id="doPrevious">
         	   this.doPreviousF();
            </function>

            <function id="doRight">
          	  this.moveCursor("right");
            </function>

            <function id="doNext">
        	    this.doNextF();
            </function>

            <function id="doUp">
         	   this.moveCursor("up");
            </function>
            
            <function id="doDown">
         	   this.moveCursor("down");
            </function>

        </code>
    	  
	<panel skin="panel" left="38" right="38" top="55" height="42"/>
 	<kbookLabel id="CalculatorLabel" skin="digits" align="right" visible="true" left="40" right="40" top="55" height="40"/>

    <group visible="true" width="160" left="0" top="95" height="30">
 	   	<radio id="RBUTTON_HEX" variable="BASIS" on="hex" active="true" text="HEX" left="040" width="55" top="0" height="30"/>
    	<radio id="RBUTTON_DEC" variable="BASIS" on="dec" active="true" text="DEC" left="100" width="55" top="0" height="30"/>
	    <radio id="RBUTTON_BIN" variable="BASIS" on="bin" active="true" text="BIN" left="160" width="55" top="0" height="30"/>  
    </group>
    <group id="TRIGM" visible="true" width="600" left="0" top="95" height="30">
 	   	<radio id="RBUTTON_DEG" variable="TRIG" on="deg" active="true" text="DEG" left="400" width="55" top="0" height="30"/>
    	<radio id="RBUTTON_RAD" variable="TRIG" on="rad" active="true" text="RAD" left="460" width="55" top="0" height="30"/>
	    <radio id="RBUTTON_GRAD" variable="TRIG" on="grad" active="true" text="GRAD" left="520" width="65" top="0" height="30"/>  
    </group>

	<button id="BUTTON_M3C"		active="true" text="C"   left="040" width="57" bottom="420" height="50"/>
	<panel skin="panel" left="100" width="170" bottom="435" height="30"/>
	 <kbookLabel id="Meminput3" skin="memory" align="right" visible="true" left="102" width="165" bottom="437" height="30"/>   	
    <button id="BUTTON_M3+"	active="true" text="M+"  left="280" width="57" bottom="420" height="50"/>		
    <button id="BUTTON_M3-"	active="true" text="M-"  left="340" width="57" bottom="420" height="50"/>		
    <button id="BUTTON_M3R"	active="true" text="MR"  left="400" width="57" bottom="420" height="50"/>
    <button id="BUTTON_OFF"	active="true" text="OFF" left="520" width="57" bottom="420" height="50"/> 

	<button id="BUTTON_M2C"		active="true" text="C"   left="040" width="57" bottom="370" height="50"/>
	<panel skin="panel" left="100" width="170" bottom="385" height="30"/>
	 <kbookLabel id="Meminput2" skin="memory" align="right" visible="true" left="102" width="165" bottom="387" height="30"/>   	
    <button id="BUTTON_M2+"	active="true" text="M+" left="280" width="57" bottom="370" height="50"/>		
    <button id="BUTTON_M2-"	active="true" text="M-"  left="340" width="57" bottom="370" height="50"/>		
    <button id="BUTTON_M2R"	active="true" text="MR" left="400" width="57" bottom="370" height="50"/>

	<button id="BUTTON_M1C"		active="true" text="C"   left="040" width="57" bottom="320" height="50"/>
	<panel skin="panel" left="100" width="170" bottom="335" height="30"/>
 	 <kbookLabel id="Meminput1" skin="memory" align="right"  visible="true" left="102" width="165" bottom="337" height="30"/>   	
    <button id="BUTTON_M1+"	active="true" text="M+" left="280" width="57" bottom="320" height="50"/>		
    <button id="BUTTON_M1-"	active="true" text="M-"  left="340" width="57" bottom="320" height="50"/>		    
    <button id="BUTTON_M1R"	active="true" text="MR" left="400" width="57" bottom="320" height="50"/>
    <button id="BUTTON_AC"	active="true" text="AC" left="520" width="57" bottom="320" height="50"/> 

	<button id="BUTTON_PI"		active="true" text="π"   left="040" width="57" bottom="270" height="50"/>
   	<button id="BUTTON_LN"		active="true" text="ln"   left="100" width="57" bottom="270" height="50"/>
   	<button id="BUTTON_EexpX"	active="true" text="e^x"  left="160" width="57" bottom="270" height="50"/>   	
	<button id="BUTTON_LOG" 	active="true" text="log"  left="220" width="57" bottom="270" height="50"/>
    <button id="BUTTON_10expX"	active="true" text="10^x" left="280" width="60" bottom="270" height="50"/>		
    <button id="BUTTON_LOG2"	active="true" text="log2" left="340" width="57" bottom="270" height="50"/>
    <button id="BUTTON_2expX"	active="true" text="2^x"  left="400" width="57" bottom="270" height="50"/>    		
    <button id="BUTTON_%"		active="true" text="%"    left="460" width="57" bottom="270" height="50"/>    		
    <button id="BUTTON_CLR"		active="true" text="C"    left="520" width="57" bottom="270" height="50"/> 
      
	<button id="BUTTON_SIN"		active="true" text="sin" left="040" width="57" bottom="220" height="50"/>
   	<button id="BUTTON_COS"		active="true" text="cos" left="100" width="57" bottom="220" height="50"/>
   	<button id="BUTTON_TAN"		active="true" text="tan" left="160" width="57" bottom="220" height="50"/>   	
	<button id="BUTTON_7" 		active="true" text="7"   left="220" width="57" bottom="220" height="50"/>
    <button id="BUTTON_8" 		active="true" text="8"   left="280" width="57" bottom="220" height="50"/>		
    <button id="BUTTON_9" 		active="true" text="9"   left="340" width="57" bottom="220" height="50"/>
    <button id="BUTTON_div"		active="true" text="÷"   left="400" width="57" bottom="220" height="50"/>    		
    <button id="BUTTON_sqrt"	active="true" text="√"   left="460" width="57" bottom="220" height="50"/> 
    <button id="BUTTON_sqr"		active="true" text="x²"  left="520" width="57" bottom="220" height="50"/> 
	
   	<button id="BUTTON_ASIN"	active="true" text="asin" left="040" width="57" bottom="170" height="50"/>
   	<button id="BUTTON_ACOS"	active="true" text="acos" left="100" width="57" bottom="170" height="50"/>
   	<button id="BUTTON_ATAN"	active="true" text="atan" left="160" width="57" bottom="170" height="50"/>   	
	<button id="BUTTON_4" 		active="true" text="4"   left="220" width="57" bottom="170" height="50"/>
    <button id="BUTTON_5" 		active="true" text="5"   left="280" width="57" bottom="170" height="50"/>		
    <button id="BUTTON_6" 		active="true" text="6"   left="340" width="57" bottom="170" height="50"/>		
    <button id="BUTTON_x" 		active="true" text="x"   left="400" width="57" bottom="170" height="50"/>    		
    <button id="BUTTON_1divx"	active="true" text="1/x" left="460" width="57" bottom="170" height="50"/> 
    <button id="BUTTON_xexpy" 	active="true" text="x^y" left="520" width="57" bottom="170" height="50"/> 
	
   	<button id="BUTTON_EE"		active="true" text="EE"  left="040" width="57" bottom="120" height="50"/>
   	<button id="BUTTON_N!"		active="true" text="n!"  left="100" width="57" bottom="120" height="50"/>
   	<button id="BUTTON_M0D"		active="true" text="Mod" left="160" width="57" bottom="120" height="50"/>   	
   	<button id="BUTTON_1" 		active="true" text="1"   left="220" width="57" bottom="120" height="50"/>
    <button id="BUTTON_2" 		active="true" text="2"   left="280" width="57" bottom="120" height="50"/>		
    <button id="BUTTON_3" 		active="true" text="3"   left="340" width="57" bottom="120" height="50"/>	
    <button id="BUTTON_-"		active="true" text="-"   left="400" width="57" bottom="120" height="50"/>    			
    <button id="BUTTON_("		active="true" text="("   left="460" width="57" bottom="120" height="50"/>
    <button id="BUTTON_)"		active="true" text=")"   left="520" width="57" bottom="120" height="50"/>

   	<button id="BUTTON_AND"		active="true" text="And" left="040" width="57" bottom="70" height="50"/>
   	<button id="BUTTON_OR"		active="true" text="Or"  left="100" width="57" bottom="70" height="50"/>
   	<button id="BUTTON_XOR"		active="true" text="Xor" left="160" width="57" bottom="70" height="50"/>   	
   	<button id="BUTTON_0" 		active="true" text="0"   left="220" width="57" bottom="70" height="50"/>
    <button id="BUTTON_KOMMA" 	active="true" text="."   left="280" width="57" bottom="70" height="50"/>		
    <button id="BUTTON_PL_MIN" 	active="true" text="+/-" left="340" width="57" bottom="70" height="50"/>		
   	<button id="BUTTON_PLUS"	active="true" text="+"   left="400" width="57" bottom="70" height="50"/>    
   	<button id="BUTTON_GLEICH" 	active="true" text="="   left="460" width="115" bottom="70" height="50"/>    

   	<button id="BUTTON_NOT"		active="true"  text="Not" left="040" width="57" bottom="20" height="50"/>
   	<button id="BUTTON_LSH"		active="true"  text="Lsh" left="100" width="57" bottom="20" height="50"/>
   	<button id="BUTTON_RSH"		active="true"  text="Rsh" left="160" width="57" bottom="20" height="50"/>
   	<button id="BUTTON_A" 		active="false" text="A"   left="220" width="57" bottom="20" height="50"/>
    <button id="BUTTON_B" 		active="false" text="B"   left="280" width="57" bottom="20" height="50"/>		
    <button id="BUTTON_C" 		active="false" text="C"   left="340" width="57" bottom="20" height="50"/>		
   	<button id="BUTTON_D" 		active="false" text="D"   left="400" width="57" bottom="20" height="50"/>       			
	<button id="BUTTON_E" 		active="false" text="E"   left="460" width="57" bottom="20" height="50"/>		
    <button id="BUTTON_F" 		active="false" text="F"   left="520" width="57" bottom="20" height="50"/>		
   	
	<sprite skin="gridCursor" id="gridCursor"  left="522" width="90" top="605" height="100" u="0" active="false" canFocus="true"/>

	<kbookLabel id="clock1" skin="clock" width="100" right="4" height="30" bottom="-30" align="right" text=""/>
    
    </group>
</group>


</document>